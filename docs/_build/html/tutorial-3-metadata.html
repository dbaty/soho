

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Metadata and template bindings &mdash; Soho 0.8.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Soho 0.8.0 documentation" href="index.html" />
    <link rel="up" title="Tutorial" href="tutorial.html" />
    <link rel="next" title="Internationalization and metadata on directory" href="tutorial-4-i18n.html" />
    <link rel="prev" title="Adding assets" href="tutorial-2-assets.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorial-4-i18n.html" title="Internationalization and metadata on directory"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial-2-assets.html" title="Adding assets"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Soho 0.8.0 documentation</a> &raquo;</li>
          <li><a href="tutorial.html" accesskey="U">Tutorial</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="metadata-and-template-bindings">
<span id="tutorial-3-metadata"></span><h1>Metadata and template bindings<a class="headerlink" href="#metadata-and-template-bindings" title="Permalink to this headline">Â¶</a></h1>
<p>(This is a continuation of the second section of the tutorial entitled
<a class="reference internal" href="tutorial-2-assets.html#tutorial-2-assets"><em>Adding assets</em></a>.)</p>
<p>You may have seen that since the last iteration of the template, we
now have a <tt class="docutils literal"><span class="pre">&lt;title&gt;</span></tt> tag. It would be a good thing to have it filled
with the title of each document. For this, additional bindings should
be passed to the template. This can be done by providing metadata
about each file (and even directories).</p>
<p>We will start by setting metadata on <tt class="docutils literal"><span class="pre">second.html</span></tt>. Metadata are
looked up in <tt class="docutils literal"><span class="pre">*.meta.py</span></tt> files. Hence, we are going to create a
<tt class="docutils literal"><span class="pre">second.html.meta.py</span></tt> file next to <tt class="docutils literal"><span class="pre">second.html</span></tt>, with the
following content:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">title</span> <span class="o">=</span> <span class="s">&#39;The second page&#39;</span>
</pre></div>
</div>
<p>Metadata files are Python files so you may import modules, compute
things, etc. All symbols that are local to the file will be available
in a binding called <tt class="docutils literal"><span class="pre">md</span></tt> in the template.</p>
<p>We could hence change the template like this (changes appear on the
highlighted line):</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="hll">  <span class="nt">&lt;title</span> <span class="na">tal:content=</span><span class="s">&quot;md[&#39;title&#39;]&quot;</span><span class="nt">/&gt;</span>
</span>  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;css/style.css&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;content&quot;</span> <span class="na">tal:content=</span><span class="s">&quot;structure body&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>Generated by Soho.<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>We did set metadata for the <tt class="docutils literal"><span class="pre">second.html</span></tt> file but not for
<tt class="docutils literal"><span class="pre">index.rst</span></tt>. We could create an <tt class="docutils literal"><span class="pre">index.rst.meta.py</span></tt> like we did
above, but reStructuredText files can embed metadata. We will indicate
the title in the file itself, like this (see highlighted lines):</p>
<div class="highlight-rst"><div class="highlight"><pre><span class="hll"><span class="p">..</span> <span class="ow">meta</span><span class="p">::</span>
</span><span class="hll">   <span class="nc">:title:</span> <span class="nf">The home page</span>
</span>
This is the <span class="gs">**home**</span> page. Look, here is a <span class="s">`link`_</span> to the second page.

<span class="p">..</span> <span class="nt">_link:</span> second.html
</pre></div>
</div>
<p>We are ready to run Soho again:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> <span class="nv">$SITE_ROOT</span>
<span class="nv">$ </span>ls src
index.rst    second.html    second.html.meta.py
<span class="nv">$ </span>soho-build -f
<span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>You should now see the title of each page in your web browser.</p>
<p>In fact, metadata can be set on directories in files named
<tt class="docutils literal"><span class="pre">.meta.py</span></tt>. The metadata of each file automatically inherits from
the metadata of the directory it lives in, as well as the directory
above (if any), and so on and so forth. We will see a use-case for
this in the next section entitled <a class="reference internal" href="tutorial-4-i18n.html#tutorial-4-i18n"><em>Internationalization and metadata on directory</em></a>.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial-2-assets.html"
                        title="previous chapter">Adding assets</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tutorial-4-i18n.html"
                        title="next chapter">Internationalization and metadata on directory</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tutorial-3-metadata.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tutorial-4-i18n.html" title="Internationalization and metadata on directory"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial-2-assets.html" title="Adding assets"
             >previous</a> |</li>
        <li><a href="index.html">Soho 0.8.0 documentation</a> &raquo;</li>
          <li><a href="tutorial.html" >Tutorial</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Damien Baty.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>